version = "9.9"

import os
import shutil

def beforeinst():
    print(":: Coreutils license: GPL-3.0")

def build():
    print("Downloading coreutils from https://github.com/redroselinux/car-coreutils-repo/raw/refs/heads/main/coreutils-bin.zip")
    os.system("curl -L -o coreutils.zip https://github.com/redroselinux/car-coreutils-repo/raw/refs/heads/main/coreutils-bin.zip")
    os.system("unzip coreutils.zip")

def install():
    os.chdir("coreutils-bin")
    for i in os.listdir():
        src = os.path.abspath(i)
        if i.endswith(".so") or ".so." in i:
            dest = f"/usr/lib/{i}"
        else:
            dest = f"/usr/bin/{i}"
        print(f"Installing {i} -> {dest}")
        shutil.move(src, dest)
